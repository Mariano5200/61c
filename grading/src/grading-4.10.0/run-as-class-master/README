This directory contains the code for a wrapper program that will give
class-master privileges to selected scripts.  The installed program(s)
are owned by the respective class masters and run setuid.  The wrapper
program for the class whose master login is FOO is by default 
called run-as-FOO.  The interface to it is

	run-as-FOO <command name> <argument> ...

You may alter the name of this wrapper program by changing the 
MASTER_PROGRAM configuration parameter in the params file and 
specifying PROGRAM_NAME=<new name> in the options to the
'make ... install' described below.

A particular directory path (called EXEC_DIRS in this directory's
Makefile) contains all scripts that the run-as-* programs will run with
privilege.  It is a standard Unix colon-separated list of absolute
directory names. If the basename of <command name> names one of these
scripts in one of the directories in EXEC_DIRS, then run-as-FOO
will execute it, passing it the indicated arguments, after first
redacting the environment to include only certain known values.

For each run-as-FOO to be installed:

1. cd to the (configured) build directory for run-as-class-master, where
   there should be a Makefile.

2. Install the wrapper with 

	make OWNER=FOO DIR=<install directory> install

   where <install directory> is a directory in which the OS is configured
   to honor the setuid bit.  'make' here should be GNU make.

In general, you'll have to be root or (if it has the necessary write 
permission) FOO to do this.

By default, the process above will yield a program that sets MASTERDIR to
~FOO and GRADINGDIR to $MASTERDIR/grading.  You may override either of these
with MASTERDIR= and GRADINGDIR= parameters to make.

There are symbolic links in the script directory ($(SHAREBINDIR) in the 
Makefiles) to the programs in $(EXEC_DIRS).  When run by non-privileged 
users, these programs all execute 'run-as-FOO' on themselves, choosing
FOO from the COURSEROOT parameter of the params file.

If you have local mirrors or archives of various class accounts on a non-class
account, it is useful to be able to look at them with sequences like

        GRADINGDIR=somedir MASTERDIR=somedir glookup cs164-xx

To make this possible, compile with

	make PRIVATE=yes OWNER=FOO DIR=<install directory> install

